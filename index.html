<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–®–∞—Ö–º–∞—Ç—ã - Chess Game</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é -->
    <div id="main-menu" class="main-menu">
        <div class="menu-buttons">
            <button id="play-btn" class="menu-btn">
                <span class="btn-icon">üéÆ</span>
                <span class="btn-text">–ò–≥—Ä–∞—Ç—å</span>
            </button>
            <button id="editor-btn" class="menu-btn">
                <span class="btn-icon">
                    <svg width="80" height="80" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" fill="none"/>
                        <path d="M2 12h20M12 2c-2.5 3-2.5 7 0 10m0-10c2.5 3 2.5 7 0 10m0 0c-2.5 3-2.5 7 0 10m0-10c2.5 3 2.5 7 0 10" stroke="currentColor" stroke-width="1.5"/>
                        <ellipse cx="12" cy="12" rx="4" ry="10" stroke="currentColor" stroke-width="1.5" fill="none"/>
                    </svg>
                </span>
                <span class="btn-text">–†–µ–¥–∞–∫—Ç–æ—Ä –∫–∞—Ä—Ç</span>
            </button>
        </div>
    </div>

    <div class="container">

        <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –≤—ã–±–æ—Ä–∞ –∏–≥—Ä—ã -->
        <div id="game-select-container" style="display: none;">
            <button id="back-from-select" class="close-btn">‚úï</button>

            <div class="game-select-section">
                <h2>–í—ã–±–æ—Ä –∏–≥—Ä—ã</h2>
                
                <div class="create-game-section">
                    <button id="create-game-btn" class="btn btn-primary btn-large">
                        <span class="btn-icon-small">+</span>
                        –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –∏–≥—Ä—É
                    </button>
                </div>

                <div class="ongoing-games-section">
                    <h3>–ò–¥—É—â–∏–µ —Ä–∞—É–Ω–¥—ã</h3>
                    <div id="games-list" class="games-list">
                        <!-- –°–ø–∏—Å–æ–∫ –∏–≥—Ä –±—É–¥–µ—Ç –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                    </div>
                </div>
            </div>
        </div>

        <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å–æ–∑–¥–∞–Ω–∏—è –º–∞—Ç—á–∞ -->
        <div id="create-match-modal" class="modal" style="display: none;">
            <div class="modal-content">
                <button class="close-btn modal-close">‚úï</button>
                <h2>–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –º–∞—Ç—á–∞</h2>
                
                <div class="form-group">
                    <label for="match-name">–ù–∞–∑–≤–∞–Ω–∏–µ –º–∞—Ç—á–∞:</label>
                    <input type="text" id="match-name" class="form-input" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ..." value="–ü–∞—Ä—Ç–∏—è #1">
                </div>
                
                <div class="form-group">
                    <label>–¢–∏–ø –∏–≥—Ä—ã:</label>
                    <div class="game-type-selector">
                        <button id="local-game-btn" class="btn btn-secondary btn-small game-type-btn active" data-type="local">–õ–æ–∫–∞–ª—å–Ω–∞—è –∏–≥—Ä–∞</button>
                        <button id="online-game-btn" class="btn btn-secondary btn-small game-type-btn" data-type="online">–û–Ω–ª–∞–π–Ω –∏–≥—Ä–∞</button>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="match-color">–¶–≤–µ—Ç –º–µ—Ç–∫–∏:</label>
                    <div class="color-picker">
                        <div class="color-option" data-color="#00d4ff" style="background: #00d4ff;"></div>
                        <div class="color-option" data-color="#ff4444" style="background: #ff4444;"></div>
                        <div class="color-option" data-color="#44ff44" style="background: #44ff44;"></div>
                        <div class="color-option" data-color="#ffff44" style="background: #ffff44;"></div>
                        <div class="color-option" data-color="#ff44ff" style="background: #ff44ff;"></div>
                        <div class="color-option selected" data-color="#00d4ff" style="background: #00d4ff; border: 3px solid white;"></div>
                    </div>
                </div>
                
                <div class="modal-actions">
                    <button id="confirm-create" class="btn btn-primary btn-large">–°–æ–∑–¥–∞—Ç—å –º–∞—Ç—á</button>
                </div>
            </div>
        </div>

        <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –æ–∂–∏–¥–∞–Ω–∏—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è -->
        <div id="waiting-modal" class="modal" style="display: none;">
            <div class="modal-content">
                <button class="close-btn waiting-close">‚úï</button>
                <h2>–û–∂–∏–¥–∞–Ω–∏–µ —Å–æ–ø–µ—Ä–Ω–∏–∫–∞</h2>
                
                <div class="waiting-info">
                    <div class="spinner"></div>
                    <p>–ü–æ–¥–µ–ª–∏—Ç–µ—Å—å –∫–æ–¥–æ–º –∫–æ–º–Ω–∞—Ç—ã —Å —Å–æ–ø–µ—Ä–Ω–∏–∫–æ–º:</p>
                    <div class="room-code-display">
                        <span id="room-code-text"></span>
                        <button id="copy-code-btn" class="btn btn-secondary btn-small">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
                    </div>
                    <p class="waiting-status">–û–∂–∏–¥–∞–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è...</p>
                </div>
            </div>
        </div>

        <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –∫ –∏–≥—Ä–µ -->
        <div id="join-modal" class="modal" style="display: none;">
            <div class="modal-content">
                <button class="close-btn join-close">‚úï</button>
                <h2>–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è –∫ –∏–≥—Ä–µ</h2>
                
                <div class="form-group">
                    <label for="room-code-input">–ö–æ–¥ –∫–æ–º–Ω–∞—Ç—ã:</label>
                    <input type="text" id="room-code-input" class="form-input" placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –∫–æ–º–Ω–∞—Ç—ã..." maxlength="6">
                </div>
                
                <div class="modal-actions">
                    <button id="confirm-join" class="btn btn-primary btn-large">–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è</button>
                </div>
            </div>
        </div>

        <main id="game-container" style="display: none;">
            <button id="back-to-menu" class="close-btn">‚úï</button>
            
            <div class="game-section">
                <div class="board-container">
                    <div id="chessboard"></div>
                </div>
                
                <div class="controls">
                    <div class="game-info">
                        <h2>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –∏–≥—Ä–µ</h2>
                        <p><strong>–¢–µ–∫—É—â–∏–π —Ö–æ–¥:</strong> <span id="current-player">–ë–µ–ª—ã–µ</span></p>
                        <p><strong>–°—Ç–∞—Ç—É—Å:</strong> <span id="game-status">–ò–≥—Ä–∞ –Ω–∞—á–∞–ª–∞—Å—å</span></p>
                    </div>
                    
                    <div class="buttons">
                        <button id="new-game" class="btn btn-primary">–ù–æ–≤–∞—è –∏–≥—Ä–∞</button>
                        <button id="reset-game" class="btn btn-secondary">–°–±—Ä–æ—Å</button>
                    </div>

                    <div class="moves-history">
                        <h3>–ò—Å—Ç–æ—Ä–∏—è —Ö–æ–¥–æ–≤</h3>
                        <div id="moves-list"></div>
                    </div>
                </div>
            </div>

            </div>

        </main>

        <!-- –†–µ–¥–∞–∫—Ç–æ—Ä –∫–∞—Ä—Ç -->
        <div id="editor-container" style="display: none;">
            <button id="back-from-editor" class="close-btn">‚úï</button>

            <div class="editor-section">
                <h2>–†–µ–¥–∞–∫—Ç–æ—Ä –∫–∞—Ä—Ç</h2>
                <p class="editor-description">–°–æ–∑–¥–∞–π—Ç–µ —Å–≤–æ—é —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—É—é —Ä–∞—Å—Å—Ç–∞–Ω–æ–≤–∫—É —Ñ–∏–≥—É—Ä</p>
                
                <div class="editor-content">
                    <div class="board-container">
                        <div id="editor-board"></div>
                    </div>
                    
                    <div class="editor-controls">
                        <h3>–§–∏–≥—É—Ä—ã</h3>
                        <div class="pieces-palette">
                            <div class="palette-section">
                                <h4>–ë–µ–ª—ã–µ</h4>
                                <div class="pieces-grid">
                                    <button class="piece-btn" data-piece="‚ôî" data-color="white">‚ôî</button>
                                    <button class="piece-btn" data-piece="‚ôï" data-color="white">‚ôï</button>
                                    <button class="piece-btn" data-piece="‚ôñ" data-color="white">‚ôñ</button>
                                    <button class="piece-btn" data-piece="‚ôó" data-color="white">‚ôó</button>
                                    <button class="piece-btn" data-piece="‚ôò" data-color="white">‚ôò</button>
                                    <button class="piece-btn" data-piece="‚ôô" data-color="white">‚ôô</button>
                                </div>
                            </div>
                            <div class="palette-section">
                                <h4>–ß–µ—Ä–Ω—ã–µ</h4>
                                <div class="pieces-grid">
                                    <button class="piece-btn" data-piece="‚ôö" data-color="black">‚ôö</button>
                                    <button class="piece-btn" data-piece="‚ôõ" data-color="black">‚ôõ</button>
                                    <button class="piece-btn" data-piece="‚ôú" data-color="black">‚ôú</button>
                                    <button class="piece-btn" data-piece="‚ôù" data-color="black">‚ôù</button>
                                    <button class="piece-btn" data-piece="‚ôû" data-color="black">‚ôû</button>
                                    <button class="piece-btn" data-piece="‚ôü" data-color="black">‚ôü</button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="editor-actions">
                            <button id="clear-board" class="btn btn-secondary">–û—á–∏—Å—Ç–∏—Ç—å –¥–æ—Å–∫—É</button>
                            <button id="reset-to-default" class="btn btn-secondary">–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è</button>
                            <button id="save-position" class="btn btn-primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏ –∏–≥—Ä–∞—Ç—å</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>
    
    <!-- PeerJS –¥–ª—è P2P —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è -->
    <script src="https://unpkg.com/peerjs@1.5.2/dist/peerjs.min.js"></script>
    
    <!-- Firebase Config -->
    <script src="firebase-config.js"></script>
    
    <!-- Multiplayer Manager -->
    <script src="multiplayer.js"></script>
    
    <!-- PeerJS Multiplayer -->
    <script src="peer-multiplayer.js"></script>
    
    <script src="script.js"></script>
</body>
</html>
